# RAG-Chat ğŸ“š

åŸºäº RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰çš„æ™ºèƒ½æ–‡æ¡£é—®ç­”ç³»ç»Ÿï¼Œæ”¯æŒä¸Šä¼ æ–‡æ¡£å¹¶è¿›è¡Œè‡ªç„¶è¯­è¨€å¯¹è¯ã€‚

## âœ¨ ç‰¹æ€§

- **å¤šæ ¼å¼æ–‡æ¡£æ”¯æŒ**ï¼šPDFã€Wordã€TXTã€Markdown ç­‰
- **æµå¼å¯¹è¯**ï¼šå®æ—¶æµå¼è¾“å‡ºï¼Œæå‡äº¤äº’ä½“éªŒ
- **å¤š LLM æ”¯æŒ**ï¼šOpenAIã€Anthropicã€SiliconFlow åŠ OpenAI å…¼å®¹æ¥å£
- **æ™ºèƒ½æŸ¥è¯¢é‡å†™**ï¼šåŸºäºå¯¹è¯ä¸Šä¸‹æ–‡è‡ªåŠ¨è¡¥å…¨æŒ‡ä»£è¯ï¼Œæå‡æ£€ç´¢å‡†ç¡®ç‡
- **è¯¦ç»†æ—¥å¿—è¿½è¸ª**ï¼šè®°å½•æ¯æ¬¡è¯·æ±‚çš„é‡å†™ã€RAG æ£€ç´¢ã€LLM è°ƒç”¨è€—æ—¶
- **å‘é‡æ£€ç´¢æµ‹è¯•**ï¼šå†…ç½®æœç´¢æµ‹è¯•é¡µé¢ï¼Œæ–¹ä¾¿è°ƒä¼˜æ£€ç´¢æ•ˆæœ
- **Docker ä¸€é”®éƒ¨ç½²**ï¼šå‰åç«¯å®¹å™¨åŒ–ï¼Œå¼€ç®±å³ç”¨

## ğŸ—ï¸ æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Frontend (React)                       â”‚
â”‚              Vite + TypeScript + TailwindCSS               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Backend (FastAPI)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Routers    â”‚   Services   â”‚    Models    â”‚    Utils      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ chatbots   â”‚ â€¢ chat       â”‚ â€¢ Chatbot    â”‚ â€¢ file_parser â”‚
â”‚ â€¢ documents  â”‚ â€¢ document   â”‚ â€¢ Document   â”‚ â€¢ text_splitterâ”‚
â”‚ â€¢ providers  â”‚ â€¢ llm        â”‚ â€¢ Provider   â”‚               â”‚
â”‚ â€¢ chat_logs  â”‚ â€¢ embedding  â”‚ â€¢ ChatLog    â”‚               â”‚
â”‚              â”‚ â€¢ vectorstoreâ”‚ â€¢ Message    â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SQLite (å…ƒæ•°æ®)     â”‚         â”‚  ChromaDB (å‘é‡)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# å…‹éš†é¡¹ç›®
git clone <repo-url> && cd rag-chat

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# è®¿é—® http://localhost
```

### æœ¬åœ°å¼€å‘

**åç«¯**

```bash
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt

# å¯åŠ¨
uvicorn app.main:app --reload --port 8000
```

**å‰ç«¯**

```bash
cd frontend
npm install
npm run dev
# è®¿é—® http://localhost:5173
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### 1. é…ç½® Provider

é¦–æ¬¡ä½¿ç”¨éœ€åœ¨ **è®¾ç½®** é¡µé¢é…ç½®ï¼š

- **LLM Provider**ï¼šç”¨äºå¯¹è¯ç”Ÿæˆï¼ˆå¦‚ OpenAIã€SiliconFlowï¼‰
- **Embedding Provider**ï¼šç”¨äºæ–‡æ¡£å‘é‡åŒ–ï¼ˆå¦‚ SiliconFlow Qwen3-Embeddingï¼‰

æµ‹è¯•æ¨èï¼š
- æ¸ é“ï¼šç¡…åŸºæµåŠ¨
- LLMï¼šdeepseek
- Embeddingï¼šQwen3-Embedding-8B

### 2. ä¸Šä¼ æ–‡æ¡£

åœ¨ **æ–‡æ¡£ç®¡ç†** é¡µé¢ä¸Šä¼ æ–‡æ¡£ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ï¼š
1. è§£ææ–‡æ¡£å†…å®¹
2. æ™ºèƒ½åˆ†å—ï¼ˆMarkdown æ„ŸçŸ¥ï¼‰
3. å‘é‡åŒ–å¹¶å­˜å…¥ ChromaDB

å¯ä½¿ç”¨[claudeæ–‡æ¡£.txt](claude%E6%96%87%E6%A1%A3.txt)ä¸Šä¼ 
æµ‹è¯•ã€‚

### 3. åˆ›å»º Bot

åœ¨ **æœºå™¨äºº** é¡µé¢åˆ›å»º Botï¼Œé…ç½®ï¼š
- é€‰æ‹© LLM Provider å’Œæ¨¡å‹
- è®¾ç½® System Prompt
- å¯ç”¨/ç¦ç”¨ RAG çŸ¥è¯†åº“
- å¯ç”¨æŸ¥è¯¢é‡å†™ï¼ˆå¯é€‰ï¼Œæå‡å¤šè½®å¯¹è¯æ£€ç´¢æ•ˆæœï¼‰

### 4. å¼€å§‹å¯¹è¯

åœ¨ **å¯¹è¯** é¡µé¢é€‰æ‹© Bot å¼€å§‹é—®ç­”ï¼Œç³»ç»Ÿä¼šï¼š
1. ï¼ˆå¯é€‰ï¼‰é‡å†™æŸ¥è¯¢ï¼Œè¡¥å…¨ä¸Šä¸‹æ–‡
2. å‘é‡æ£€ç´¢ç›¸å…³æ–‡æ¡£
3. ç»“åˆä¸Šä¸‹æ–‡ç”Ÿæˆå›ç­”

## ğŸ“¡ API æ¥å£

åç«¯æä¾› RESTful APIï¼Œå¯åŠ¨åè®¿é—® `/docs` æŸ¥çœ‹ Swagger æ–‡æ¡£ã€‚

### ä¸»è¦æ¥å£

| æ¨¡å— | æ¥å£ | è¯´æ˜ |
|------|------|------|
| Provider | `GET/POST /api/llm-providers` | LLM é…ç½®ç®¡ç† |
| Provider | `GET/POST /api/embedding-providers` | Embedding é…ç½®ç®¡ç† |
| Document | `POST /api/documents/upload` | ä¸Šä¼ æ–‡æ¡£ |
| Document | `POST /api/documents/{id}/reprocess` | é‡æ–°å¤„ç†æ–‡æ¡£ |
| Chatbot | `GET/POST /api/chatbots` | Bot ç®¡ç† |
| Chat | `POST /api/conversations/{id}/chat` | å‘é€æ¶ˆæ¯ï¼ˆSSE æµå¼ï¼‰ |
| Logs | `GET /api/chat-logs` | æŸ¥è¯¢æ—¥å¿— |
| Search | `POST /api/search/test` | å‘é‡æ£€ç´¢æµ‹è¯• |

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

```env
# æ•°æ®åº“
DATABASE_URL=sqlite+aiosqlite:///./data/rag_chat.db

# å­˜å‚¨ç›®å½•
CHROMA_DIR=./data/chroma
UPLOAD_DIR=./data/uploads

# è°ƒè¯•æ¨¡å¼
DEBUG=true
```

### åˆ†å—å‚æ•°

é»˜è®¤é…ç½®ï¼ˆç»æµ‹è¯•éªŒè¯ï¼‰ï¼š
- `CHUNK_SIZE=1000` â€” å¹³è¡¡è¯­ä¹‰å®Œæ•´æ€§å’Œæ£€ç´¢ç²¾åº¦
- `CHUNK_OVERLAP=200` â€” 20% é‡å ï¼Œé¿å…è¯­ä¹‰å‰²è£‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
rag-chat/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ models/        # SQLAlchemy æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ routers/       # FastAPI è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ schemas/       # Pydantic Schema
â”‚   â”‚   â”œâ”€â”€ services/      # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â””â”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ data/              # æ•°æ®å­˜å‚¨ï¼ˆgitignoreï¼‰
â”‚   â”œâ”€â”€ tests/             # æµ‹è¯•ç”¨ä¾‹
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/           # API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ components/    # é€šç”¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ pages/         # é¡µé¢ç»„ä»¶
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ README.md
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

**åç«¯**
- FastAPI + SQLAlchemy + Pydantic
- LangChainï¼ˆLLM é›†æˆï¼‰
- ChromaDBï¼ˆå‘é‡å­˜å‚¨ï¼‰

**å‰ç«¯**
- React 18 + TypeScript
- Vite + TailwindCSS
- React Query + React Router

## ğŸ“„ License

MIT

